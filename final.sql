CREATE TABLE USER (user_id INTEGER PRIMARY KEY AUTO_INCREMENT NOT NULL,  username VARCHAR(255), first_name VARCHAR(255) NOT NULL, last_name VARCHAR(255) NOT NULL, email VARCHAR(255), phone_no INTEGER, cell_no INTEGER, role VARCHAR(100) NOT NULL, hash TEXT NOT NULL);

CREATE TABLE CLIENT (user_id INTEGER, client_id VARCHAR(100), fiat_money FLOAT NOT NULL DEFAULT 1000000.00, bitcoins FLOAT NOT NULL DEFAULT 0.00, level VARCHAR(100) NOT NULL, PRIMARY KEY(user_id), FOREIGN KEY (user_id) REFERENCES USER(user_id) ON DELETE CASCADE);

CREATE TABLE LIVES (user_id INTEGER, zipcode INTEGER NOT NULL, street_name VARCHAR(255), city VARCHAR(255), state VARCHAR(255), PRIMARY KEY(user_id, zipcode), FOREIGN KEY (user_id) REFERENCES USER(user_id) ON DELETE CASCADE);

CREATE TABLE TRADER (user_id INTEGER, trader_id VARCHAR(100) NOT NULL, fiat_money FLOAT NOT NULL DEFAULT 90000000.00, PRIMARY KEY(user_id), FOREIGN KEY (user_id) REFERENCES USER(user_id) ON DELETE CASCADE);

CREATE TABLE TRANSFER_CASH_TO_TRADER (time timestamp DEFAULT CURRENT_TIMESTAMP, client_id VARCHAR(100), trader_id VARCHAR(100), amount FLOAT NOT NULL, status INTEGER DEFAULT -1, PRIMARY KEY(client_id, trader_id, time));

CREATE TABLE ASK_FOR_TRADE (client_id VARCHAR(100), trader_id VARCHAR(100), coin FLOAT NOT NULL DEFAULT -1, status INTEGER NOT NULL DEFAULT -1, time timestamp DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY(client_id, trader_id, time));

CREATE TABLE NET_AMOUNT (client_id VARCHAR(100), trader_id VARCHAR(100), net_amount FLOAT DEFAULT 0, PRIMARY KEY(client_id, trader_id));

CREATE TABLE TRANSACTIONX (user_id INTEGER, client_id VARCHAR(100), trader_id VARCHAR(100) NOT NULL DEFAULT 'self', price FLOAT, coin FLOAT, commission FLOAT, commission_type VARCHAR(100), status INTEGER, time timestamp DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY(client_id, trader_id, time));

CREATE TABLE MANAGER (user_id INTEGER, manager_id VARCHAR(100), PRIMARY KEY(user_id), FOREIGN KEY (user_id) REFERENCES USER(user_id) ON DELETE CASCADE);

/*Insering USER*/
INSERT INTO USER VALUES(1,'naruto','Naruto','Uzumaki','',0, 0,'client','pbkdf2:sha256:150000$Cpiyrw8Q$c6705a1955f091e5fa2c5dce009252e0a8365ff0057576187c2d76898898c974');
INSERT INTO USER VALUES(2,'sasuke','Sasuske','Uchiha','',0,0,'client','pbkdf2:sha256:150000$rMWiGXqv$0691cfb7de4f81ebd7f57cdd89e2ae27118efc170cff29f9c5affdd81687d255');
INSERT INTO USER VALUES(3,'sakura','Sakura','Haruno','',0,0,'client','pbkdf2:sha256:150000$DxgSdMYK$026c40b12b57aae6fa1106648a9214a6924fb5c61fbf659a831e10b2dd36743d');
INSERT INTO USER VALUES(4,'iruka','Iruka','Sensei','',0,0,'trader','pbkdf2:sha256:150000$UrHM7f7G$0b9fda59194b04d456438af847cca0dc34a70771ce665101a6bf6bda3f59bfb3');
INSERT INTO USER VALUES(5,'kakashi','Kakashi','Hatake','',0,0,'trader','pbkdf2:sha256:150000$nQ70262F$330462a04bd1ae58d1964ea12eeb15f711d28b1f04a1a51420a9f08193bd5103');
INSERT INTO USER VALUES(6,'hashirama','Hashirama','Senju','',0,0,'manager','pbkdf2:sha256:150000$TvSpXpPw$a7acca58b29134788ecc3858b61e7771ee56bbbf5b907445a21a8d06e9b8070d');

/*This is done automatically in code */
INSERT INTO CLIENT VALUES(1,'c1',940529.47149999998506,1.1999999999999999555,'Silver');
INSERT INTO CLIENT VALUES(2,'c2',1000000.0,0.0,'Silver');
INSERT INTO CLIENT VALUES(3,'c3',1000000.0,0.0,'Silver');
INSERT INTO TRADER VALUES(4,'t4',90000000.0);
INSERT INTO TRADER VALUES(5,'t5',90000000.0);


INSERT INTO TRANSACTIONX VALUES(1,'c1','self',49066.599999999998544,0.5,1226.6649999999999636,'fiat',1,'2021-12-05 02:50:57');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',49066.0,-0.25,613.32500000000004548,'fiat',1,'2021-12-05 02:51:06');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',49042.529999999998836,0.94999999999999995559,0.050000000000000002775,'crypto',1,'2021-12-05 02:51:14');
INSERT INTO MANAGER VALUES(6,'m6');
INSERT INTO CLIENT VALUES(1,'c1',101701.10320000002684,0.082999999999999962696,'silver');
INSERT INTO CLIENT VALUES(2,'c2',100000.0,0.0,'silver');
INSERT INTO CLIENT VALUES(3,'c3',100000.0,0.0,'silver');
INSERT INTO LIVES VALUES(1,12345,'Mist','Leaf Village','Konohamaru');
INSERT INTO LIVES VALUES(2,12345,'Mist','Leaf Village','Konohamaru');
INSERT INTO LIVES VALUES(3,12345,'Mist','Leaf Village','Konohamaru');
INSERT INTO TRADER VALUES(4,'t4',900000.0);
INSERT INTO TRADER VALUES(5,'t5',900000.0);
INSERT INTO TRANSFER_CASH_TO_TRADER VALUES('2021-11-29 20:43:08','c1','t4',5400.0,0);
INSERT INTO TRANSFER_CASH_TO_TRADER VALUES('2021-11-29 20:43:08','c2','t5',50.0,-1);
INSERT INTO ASK_FOR_TRADE VALUES('c2','t5',1.75,-1,'2021-11-29 20:43:08');
INSERT INTO NET_AMOUNT VALUES('c1','t4',581.92089999999916469);
INSERT INTO TRANSACTIONX VALUES(1,'c1','t4',5423.5000000000000001,1.25,53.200000000000002842,'fiat_money',1,'2021-11-29 20:43:08');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',6423.5000000000000001,0.84999999999999997779,65.20000000000000284,'crypto',1,'2021-11-29 20:43:08');
INSERT INTO TRANSACTIONX VALUES(1,'c1','t4',5423.5000000000000001,1.25,53.200000000000002842,'fiat_money',NULL,'2021-11-29 20:43:08');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',58224.029999999998836,1.5200000000000000177,4425.0262800000000422,'fiat',1,'2021-11-29 20:56:08');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',58209.480000000003202,-0.24699999999999999733,0.013000000000000001137,'crypto',1,'2021-11-29 20:56:18');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',58198.540000000000874,12935.999999999999999,37642815.67200000584,'fiat',-1,'2021-11-29 20:56:28');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',58190.569999999999708,1.4499999999999999555,4218.8163249999997787,'fiat',-1,'2021-11-29 20:57:34');
INSERT INTO TRANSACTIONX VALUES(1,'c1','self',58189.069999999999708,0.4000000000000000222,1163.781400000000076,'fiat',1,'2021-11-29 20:57:41');
INSERT INTO TRANSACTIONX VALUES(4,'c1','t4',58192.089999999996505,0.010000000000000000208,14.548022500000000079,'fiat_money',1,'2021-11-29 20:58:10');
INSERT INTO TRANSACTIONX VALUES(4,'c1','t4',58191.120000000002617,-1.6000000000000000888,2327.6448000000004867,'fiat_money',1,'2021-11-29 20:58:15');
INSERT INTO TRANSACTIONX VALUES(4,'c3','t4',58191.550000000002908,0.5,727.39437500000008185,'fiat_money',-1,'2021-11-29 20:58:21');

/*
DROP TABLE CLIENT;
DROP TABLE TRADER;
DROP TABLE MANAGER;
DROP TABLE LIVES;
DROP TABLE TRANSACTIONX;
DROP TABLE TRANSFER_CASH_TO_TRADER;
DROP TABLE NET_AMOUNT;
DROP TABLE ASK_FOR_TRADE;
DROP TABLE USER;
*/
